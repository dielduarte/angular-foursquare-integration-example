!function(){"use strict";angular.module("app",["env","ngRoute","ngSanitize","ngMaterial","ngMessages","PlacesModule","welcomeModule","topFiveModule","heatMapModule"])}(),function(){"use strict";function t(){return{restrict:"EA",templateUrl:"widgets/soft-options/template.html",controller:"softOptionsController"}}angular.module("app").directive("softOptions",t)}(),function(){"use strict";function t(t,o,e,n,a){function r(){e.showWelcomeModal().then(function(){u()})}function i(){e.showPlacesModal()}function l(){e.showHeatMapModal()}function c(){e.showTopFiveModal()}function u(){e.loadingModal(!0),n.getPermission().then(function(t){a.setView(t.latitude,t.longitude),e.loadingModal(!1)})}t.openPlacesModal=i,t.openHeatMapModal=l,t.openTopFiveModal=c,o(function(){r()})}angular.module("app").controller("softOptionsController",t),t.$inject=["$scope","$timeout","modalFactory","geolocationFactory","leafletFactory"]}(),function(){"use strict";angular.module("welcomeModule",[])}(),function(){"use strict";function t(t){function o(){t.cancel()}function e(){t.hide()}var n=this;n.close=o,n.startest=e}angular.module("welcomeModule").controller("welcomeController",t),t.$inject=["$mdDialog"]}(),function(){"use strict";angular.module("topFiveModule",[])}(),function(){"use strict";function t(t,o,e,n,a,r,i){function l(){t.cancel()}function c(){var t=a.getLocation();r.start(t.latitude,t.longitude),e.searchTrendings(t,s.distance,5).then(function(t){u(t.data.response.venues)})}function u(t){t.length>0?(l(),angular.forEach(t,function(o,e){r.setMarkerWithPopup(t[e].location.lat,t[e].location.lng,t[e].name)})):i.show(i.simple().textContent("For you current position foursquare did not find any top five place :/!").position("top right").hideDelay(5e3))}var s=this;s.close=l,s.filter=c}angular.module("topFiveModule").controller("topFiveController",t),t.$inject=["$mdDialog","$scope","foursquareAPIFactory","modalFactory","geolocationFactory","leafletFactory","$mdToast"]}(),function(){"use strict";angular.module("PlacesModule",[])}(),function(){"use strict";function t(t,o,e,n,a){function r(){t.cancel()}function i(){var t=n.getLocation();a.start(t.latitude,t.longitude),e.searchVenues(t,c.distance,o.categories).then(function(t){l(t.data.response.venues)})}function l(t){r(),angular.forEach(t,function(o,e){a.setMarkerWithPopup(t[e].location.lat,t[e].location.lng,t[e].name)})}var c=this;c.close=r,c.filter=i,e.getCategories().then(function(t){o.categories=t.data.response.categories})}angular.module("PlacesModule").controller("PlacesController",t),t.$inject=["$mdDialog","$scope","foursquareAPIFactory","geolocationFactory","leafletFactory"]}(),function(){"use strict";angular.module("heatMapModule",[])}(),function(){"use strict";function t(t,o,e,n,a,r,i){function l(){t.cancel()}function c(){var t={};i.getAddress(s.city).then(function(o){t={latitude:o.data.results[0].geometry.location.lat,longitude:o.data.results[0].geometry.location.lng},r.start(t.latitude,t.longitude),e.searchVenues(t,1e6,"").then(function(o){u(o,t)})})}function u(t,o){l(),r.generateHeatMap(t.data.response.venues,o)}var s=this;s.close=l,s.filter=c}angular.module("heatMapModule").controller("heatMapController",t),t.$inject=["$mdDialog","$scope","foursquareAPIFactory","modalFactory","geolocationFactory","leafletFactory","gmapsFactory"]}(),function(){"use strict";function t(t){function o(o,e){return t.show({controller:e,templateUrl:o,parent:angular.element(document.body),clickOutsideToClose:!0})}function e(){return l=u+"places/places.template.html",c="PlacesController as vm",o(l,c)}function n(){return l=u+"welcome/welcome.template.html",c="welcomeController as vm",o(l,c)}function a(e){return l="common/layout/modals/loading.template.html",e?o(l,""):void t.cancel()}function r(){return l=u+"topFive/topFive.template.html",c="topFiveController as vm",o(l,c)}function i(){return l=u+"heatMap/heatMap.template.html",c="heatMapController as vm",o(l,c)}var l,c,u="modules/";return{showPlacesModal:e,showWelcomeModal:n,loadingModal:a,showTopFiveModal:r,showHeatMapModal:i}}angular.module("app").factory("modalFactory",t),t.$inject=["$mdDialog"]}(),function(){"use strict";function t(t,o,e){function n(t,o){void 0!==u&&u.remove(),u=L.map("map").setView([t,o],13),a(),i(t,o)}function a(){L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token="+o,{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:t,accessToken:o}).addTo(u)}function r(t,o){u.setView(L.latLng(t,o),16),i(t,o)}function i(t,o){L.marker(L.latLng(t,o),{icon:d}).bindPopup("Current location! =)").addTo(u)}function l(t,o,e){L.marker(L.latLng(t,o),{icon:s}).bindPopup(e).addTo(u)}function c(t,o){var e=[];angular.forEach(t,function(o,n){e.push([t[n].location.lat,t[n].location.lng])});L.heatLayer(e,{radius:20,blur:15,maxZoom:17}).addTo(u);r(o.latitude,o.longitude)}var u,s=L.icon({iconUrl:"assets/img/marker.svg"}),d=L.icon({iconUrl:"assets/img/userMarker.svg"});return{start:n,setView:r,setMarker:i,setMarkerWithPopup:l,generateHeatMap:c}}angular.module("app").factory("leafletFactory",t),t.$inject=["MAPBOX_CLIENTID","MAPBOX_ACCESTOKEN","geolocationFactory"]}(),function(){"use strict";function t(t){function o(o){return t.get("http://maps.googleapis.com/maps/api/geocode/json?address="+o+"&sensor=false")}return{getAddress:o}}angular.module("app").factory("gmapsFactory",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,o){function e(){return navigator.geolocation?navigator.geolocation.watchPosition(n):i.reject("Geolocation is not supported by this browser."),i.promise}function n(t){r={latitude:t.coords.latitude,longitude:t.coords.longitude},i.resolve(r)}function a(){return r}var r={},i=t.defer();return{getPermission:e,getLocation:a}}angular.module("app").factory("geolocationFactory",t),t.$inject=["$q","$mdDialog"]}(),function(){"use strict";function t(t,o,e,n,a,r,i){function l(e,n){var l={client_id:t,client_secret:o,v:a};null!==n&&(l=angular.merge(l,n));var c=i(l);return r.get(d+e+c)}function c(){var t="venues/categories?";return l(t,null)}function u(t,o,e){var n="venues/search?",a=[];angular.forEach(e,function(t,o){e[o].selected&&a.push(e[o].id)}),a.length>1?a.join(","):a=a[0];var r={ll:t.latitude+","+t.longitude,radius:o,categoryId:a};return l(n,r)}function s(t,o,e){var n="venues/trending?",a={ll:t.latitude+","+t.longitude,radius:o,limit:e};return l(n,a)}var d=n+e;return{getCategories:c,searchVenues:u,searchTrendings:s}}angular.module("app").factory("foursquareAPIFactory",t),t.$inject=["FOURSQUARE_CLIENID","FOURSQUARE_CLIENSECRET","FOURSQUARE_APIVERSION","FOURSQUARE_APIURL","FOURSQUARE_VERSIONPARAMETER","$http","$httpParamSerializerJQLike"]}(),angular.module("env",[]).constant("APIURL","http://production.api.com").constant("MAPBOX_ACCESTOKEN","pk.eyJ1IjoiZGllbGR1YXJ0ZSIsImEiOiJjaWw4cGFsbm4wZTcwdWttMHY4bWdrN3R6In0.M36YS9sB4YQGmsyliwb-qg").constant("MAPBOX_CLIENTID","dielduarte.p9ledl7a").constant("FOURSQUARE_CLIENID","BFE42FYE1VA5LCDOPDDBXFNPE4GHJSIMKDOVXKK3KVBZSWDE").constant("FOURSQUARE_CLIENSECRET","ZBBNI3JIJXGBBR0SZ1VS0CWVOEBZPOTW5G1ZXJCUU3JREZBG").constant("FOURSQUARE_APIVERSION","v2/").constant("FOURSQUARE_APIURL","https://api.foursquare.com/").constant("FOURSQUARE_VERSIONPARAMETER",20130815),function(){"use strict";function t(t){t.otherwise({redirectTo:"/"}),t.when("/",{templateUrl:"common/layout/index.html",controller:"appController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$routeProvider"]}(),function(){"use strict";function t(t){t.start(51.505,-.09)}angular.module("app").controller("appController",t),t.$inject=["leafletFactory"]}();
//# sourceMappingURL=app.min.js.map
